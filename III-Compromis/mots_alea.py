import random as rd
import time
from ArcEnCiel import *
import numpy as np

database = "/Users/juliettedebono/Documents/MP*/TIPE/II- Basique/II- b) Attaque memoire/Memoire4.sqlite"
n = 100
mots = [alea(datas) for _ in range(n)]
temps_recherche = np.zeros((4, n))

for i in range(len(mots)):
    mot = mots[i]
    hach = hachage(mot)
    print(i)

    print("Force Brute")
    t = time.time()
    mot2 = forceBrute(hach, 4, 4, caracteres)
    temps_recherche[0, i] = time.time() - t

    print("Mémoire")
    t = time.time()
    mot2 = rechercheM(database, hach)
    temps_recherche[1, i] = time.time() - t

    print("Classique")
    datas.type = "Classique"
    t = time.time()
    mot2 = inverse(hach, datas)
    temps_recherche[2, i] = time.time() - t

    print("Arc en ciel")
    datas.type = "ArcEnCiel"
    t = time.time()
    mot2 = inverse(hach, datas)
    temps_recherche[3, i] = time.time() - t

print(mots)
print(temps_recherche)

print(np.mean(temps_recherche, axis = 1))
print(np.median(temps_recherche, axis = 1))
print(np.std(temps_recherche, axis = 1))

#                   Force Brute    Mémoire    Classique   ArcEnCiel
# Temps création      [None]       [None]      [None]      [None]
# Temps recherche     [None]       [None]      [None]      [None]
# Mémoire             [None]       [None]      [None]      [None]

# mots = ['kICZ', 'ZTK4', 'xO4u', 'p0wK', 'wXxk', 'OrYy', 'WClb', '58H7', 'o3HW', 'ytXF', 'PGI6', '2WDc', 'UIzl', 'sw7T', 'NBIw', 'FNAF', '67qO', 'wbil', 'J6vI', 'F5B5', '9rmg', 'Orjf', '0YNc', 'SomR', 'ds8s', 'drCk', 'qTwc', 'Q1a7', 'T9sH', 'bbyV', 'l5kX', 'izEM', 'YqJ2', 'Xs2X', 'u8Nw', '7yND', 'K1UY', 'jnC0', '9Oqd', 'aXYp', 'plSW', 'w72z', 'VBBp', 'lnfl', 'rFPF', 'a3aF', '87JV', 'xaYn', 'sRbM', 'spl4', 'yT7g', 'JvBi', 'ZSOD', 'yOe4', '1CgS', 'A2aQ', 'DmeR', 'qBFB', 'v2YO', 'pyA1', 'UEB2', 'ImQf', 'VxWO', 'DQ81', 'LGvF', 'GGkA', 'IsPK', 'VFH1', 'Skbi', 'jQjI', 'VFRZ', 'SGkC', 'UjXP', '3dKJ', 'ZFXz', 'StMQ', 'nldR', 'yFqD', '4yov', 'yptt', 'ZfUi', 'A7Ii', 'XG08', 'dxXL', 't6XK', 'DJIp', 'Qgx8', 'AvzM', '1M8N', 'ad7X', 'I4FM', '0zzw', '7i85', 'jaYh', 'oSdt', 'L0rO', 'MZBv', 'tnpd', '5mu0', 'lP7a']

temps_recherche = [
    np.array([ 7.48408079, 37.04957628, 16.94084716, 11.42316318, 16.38663292,
       28.08847308, 33.91678691, 40.57834911, 10.40874481, 17.05675411,
       29.05584073, 39.17067099, 33.03121591, 12.8329339 , 27.13533998,
       21.43732309, 39.96533799, 14.88723397, 25.19401789, 21.72123194,
       41.89045   , 27.12084198, 35.6866219 , 29.95848989,  2.21866322,
        2.42368412, 11.30582213, 28.95326209, 31.03416491,  0.68216491,
        8.09176302,  5.65447497, 33.97140479, 33.38341713, 14.1082418 ,
       40.37034583, 24.92904925,  6.21411896, 42.01368237,  0.54065776,
       10.26698494, 15.58138108, 32.10026526,  7.52308822, 11.79262781,
        0.59974289, 41.3691721 , 15.51225495, 12.59202504, 12.38531995,
       16.68569589, 23.81572604, 35.07833886, 17.41827679, 37.21420383,
       18.57530904, 23.12404203, 13.33703375, 17.67671514, 11.983881  ,
       37.39547825, 27.86402988, 38.18298793, 24.10632396, 26.18967986,
       22.92229033, 25.57449293, 32.92228198, 30.75970507,  7.17288709,
       33.15767884, 31.070894  , 32.15044308, 45.07487488, 42.41560507,
       35.80665898, 10.65250707, 19.4522717 , 39.17097592, 16.39935398,
       34.40831184, 18.22198701, 33.51514816,  2.2523098 , 14.3225522 ,
       21.0275538 , 29.86340714, 18.48089695, 36.99392414,  0.06312013,
       29.88530993, 43.45615697, 49.69982386,  7.75746512, 12.18912411,
       31.76574111, 32.43323803, 16.18395996, 45.54383802,  8.14673924]),
    np.array([1.43245602, 1.43737197, 1.41070509, 1.46778107, 1.40777707,
       1.3904829 , 1.43355584, 1.40450001, 1.38287401, 1.39033318,
       1.42546201, 1.39034486, 1.39766598, 1.40922594, 1.39569521,
       1.34461689, 1.33362579, 1.37518096, 1.34968925, 1.37745833,
       1.35476112, 1.34682608, 1.33327103, 1.37440205, 1.33617997,
       1.38018131, 1.34323978, 1.33002877, 1.36886406, 1.34010768,
       1.32396793, 1.32001114, 1.36882305, 1.31236792, 1.33002901,
       1.35186481, 1.34340978, 1.35472226, 1.38009501, 1.38117504,
       1.33095598, 1.32085609, 1.35105205, 1.36898112, 1.34605813,
       1.34290409, 1.36824703, 1.33355212, 1.36715984, 1.32673573,
       1.37318397, 1.32694292, 1.32756996, 1.42543697, 1.41018009,
       1.43014503, 1.78435302, 1.78444219, 1.89947891, 1.57158399,
       1.64389896, 1.99729896, 1.6955781 , 1.85767388, 1.43537593,
       1.42075586, 6.42162204, 1.76911592, 1.42410994, 1.9610889 ,
       1.46152186, 1.38136292, 1.39121985, 1.66234398, 1.85984802,
       1.86130381, 1.74134111, 1.65289617, 1.46193886, 1.35255599,
       1.33797669, 1.32899284, 1.32318473, 1.31750798, 1.44033384,
       1.44705677, 2.07856107, 1.42398524, 1.36390591, 1.65233302,
       1.71778083, 1.61293101, 1.90185094, 1.74857306, 2.03505778,
       1.92666006, 1.87554693, 1.92644906, 1.75284004, 1.38193488]),
    np.array([ 36.51550007,   9.37046194,  31.90311027,  12.13274908,
        35.15078998,  43.85159993,  25.89137197,  13.95896602,
        31.78128409,  25.9654119 ,  28.49303079,  23.16991782,
        54.59172797,  45.76273513,   9.64292383,  34.01576591,
        13.23105383,  36.69477797,  30.72434592,   9.38007283,
        36.83163714,  12.61273193,  18.04264975,  18.89306784,
         9.45942783,  28.6610539 ,  42.93341494,  44.12296796,
        44.94183803,  35.17541289,  16.74342299,  24.91473794,
        35.52758503,  21.40189314,   7.13093591,  13.94211102,
        32.62125778,  14.7743392 ,  50.37439919,  23.00323391,
        14.23680687,  49.76016593,  22.96452308,  10.36806202,
        49.17733121,  55.84600186,  17.29855204,  22.87439895,
        19.17474127,  29.47931099,  32.34591699,  24.70991731,
        22.59567595,  16.08691883,  26.60836673,  37.81304979,
        25.136621  ,  33.79707479,  14.1265521 ,  36.21914101,
        37.77051425,  39.25299883,  35.74921131,  24.71619105,
        32.81830502, 278.16359115,  11.14688587,  32.96459389,
        32.49235916,  23.12126017,  31.98077011,   8.15811419,
       364.69406104,  35.66222596,  10.27587414,  59.5743432 ,
         8.59454417,  16.334728  ,  38.48093486,  43.08903289,
        12.65628171,  45.97774696,  28.63385797,  19.32925916,
        30.23185611,  33.89700198,  15.65830922,  36.18696809,
        18.00773406,   7.74706984,  34.23829389,  56.03851914,
        19.2253871 ,  35.52157974,  38.9081068 ,  59.23415518,
        46.97769499,   8.2677331 ,  16.35617709,  46.43442106]),
    np.array([ 2.22605419,  5.64695001,  3.26801991,  0.3662858 ,  7.28929615,
       10.10549903, 10.15042925,  6.83593702,  4.31013036,  3.20083284,
        2.50505614, 22.48185325,  5.01994896,  1.05129385,  0.44761705,
       16.61516094,  0.11037087, 15.84094   ,  8.55689073, 21.51310325,
        2.44440603, 12.91054606, 17.99175   ,  9.85523582,  1.12190175,
        3.04914284,  4.857162  ,  9.22664595,  0.13038778, 21.76274896,
       14.03879333,  1.47834921, 20.12752414,  3.58041596, 16.66767621,
        4.85608888, 17.40743399,  2.55598116,  1.12551427,  1.3454771 ,
       15.87514329,  8.25224209, 14.92631817, 11.7137742 ,  6.44177914,
       14.80449605, 17.39310312,  5.14437914, 17.08847308,  3.96504712,
        9.33138418, 12.65140295,  2.1654191 ,  7.59183311,  1.42565775,
       20.59430814, 11.61556506,  0.21904421,  3.57400775,  1.16023898,
        4.06094503,  1.50145316,  2.25377464,  9.92789292,  2.28378797,
        1.98066711,  0.4639039 , 21.60963726,  9.30563307,  3.72771096,
        9.29973483,  7.71987271,  1.33492589,  7.08227706,  6.78416777,
       26.43807316, 27.19942403,  1.31878495,  8.99495792, 11.73372293,
        1.47233605,  0.1953249 , 13.18100786,  2.23198485,  7.98771882,
        7.53292418,  5.58712602,  1.77688694,  0.12983799,  3.66454029,
        2.398314  , 14.281569  ,  6.75143385,  1.99435997, 10.86505485,
        0.25706911, 11.64684796,  4.80289316,  9.80327177,  6.08203793])]